(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52706,e=>{e.v("/_next/static/media/logo.79b9d45f.png")},22927,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=Object.defineProperty,i=new Map,l=new WeakMap,n=0,a=void 0;r.Component;var o=e.i(31278),c=e.i(75254);let d=(0,c.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),h=(0,c.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var u=e.i(61805),g=e.i(22016),x=e.i(1851),m=e.i(90453),f=e.i(87316),p=e.i(83157),y=e.i(94983);let v=(0,c.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var b=e.i(71528);let w=({news:e})=>{let s=e.news_images?.find(e=>1===e.main_image)||e.news_images?.[0],i=s?`${u.IMAGE_BASE_URL}${s.path}`:b.default.src,[l,n]=(0,r.useState)(i);(0,r.useEffect)(()=>{n(i)},[i]);let a=`${window.location.origin}/news/${e.slug}`,o=encodeURIComponent(e.title),c=encodeURIComponent(a),d=e=>{"facebook"===e?window.open(`https://www.facebook.com/sharer/sharer.php?u=${c}`,"_blank"):window.open(`https://wa.me/?text=${o}%20${c}`,"_blank")};return(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-lg transition-all duration-300 border border-gray-100 overflow-hidden flex flex-col h-full group",children:[(0,t.jsxs)("div",{className:"relative aspect-video overflow-hidden bg-gray-100",children:[(0,t.jsx)("img",{src:l,onError:()=>n(b.default.src),alt:e.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end justify-end p-4"})]}),(0,t.jsxs)("div",{className:"p-5 flex flex-col flex-grow",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-3",children:[(0,t.jsx)(f.Calendar,{size:14,className:"text-primary-500"}),(0,t.jsx)("time",{children:e.created_at?(0,x.format)(new Date(e.created_at),"dd MMMM yyyy",{locale:m.ar}):""})]}),(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-2 line-clamp-2 hover:text-primary-600 transition-colors",children:(0,t.jsx)(g.default,{href:`/news/${e.slug}`,children:e.title})}),(0,t.jsx)("p",{className:"text-gray-600 text-sm line-clamp-3 mb-4 flex-grow opacity-80",dangerouslySetInnerHTML:{__html:(e.description||"").replace(/لمزيد من التفاصيل :|لمزيد من التفاصيل/g,"").replace(/<[^>]+>/g,"")}}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-50",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>d("facebook"),className:"p-2 rounded-full bg-blue-50 text-blue-600 hover:bg-blue-100 transition-colors",title:"مشاركة على فيسبوك",children:(0,t.jsx)(p.Facebook,{size:16})}),(0,t.jsx)("button",{onClick:()=>d("whatsapp"),className:"p-2 rounded-full bg-green-50 text-green-600 hover:bg-green-100 transition-colors",title:"مشاركة على واتساب",children:(0,t.jsx)(y.MessageCircle,{size:16})})]}),(0,t.jsxs)(g.default,{href:`/news/${e.slug}`,className:"flex items-center gap-1 text-sm font-semibold text-primary-600 hover:text-primary-700 transition-all group-hover:gap-2",children:["اقرأ المزيد",(0,t.jsx)(v,{size:16,className:"rtl:rotate-180"})]})]})]})]})};e.s(["NewsList",0,()=>{let[e,s]=(0,r.useState)([]),[c,g]=(0,r.useState)([]);(0,r.useRef)(1);let[x,m]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!0),[y,v]=(0,r.useState)(null),{ref:b,inView:j}=function({threshold:e,delay:t,trackVisibility:s,rootMargin:o,root:c,triggerOnce:d,skip:h,initialInView:u,fallbackInView:g,onChange:x}={}){var m;let[f,p]=r.useState(null),y=r.useRef(x),[v,b]=r.useState({inView:!!u,entry:void 0});y.current=x,r.useEffect(()=>{let r;if(!h&&f)return r=function(e,t,r={},s=a){if(void 0===window.IntersectionObserver&&void 0!==s){let i=e.getBoundingClientRect();return t(s,{isIntersecting:s,target:e,intersectionRatio:"number"==typeof r.threshold?r.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),()=>{}}let{id:o,observer:c,elements:d}=function(e){let t=Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>{var r;return`${t}_${"root"===t?!(r=e.root)?"0":(l.has(r)||(n+=1,l.set(r,n.toString())),l.get(r)):e[t]}`}).toString(),r=i.get(t);if(!r){let s,l=new Map,n=new IntersectionObserver(t=>{t.forEach(t=>{var r;let i=t.isIntersecting&&s.some(e=>t.intersectionRatio>=e);e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=i),null==(r=l.get(t.target))||r.forEach(e=>{e(i,t)})})},e);s=n.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:n,elements:l},i.set(t,r)}return r}(r),h=d.get(e)||[];return d.has(e)||d.set(e,h),h.push(t),c.observe(e),function(){h.splice(h.indexOf(t),1),0===h.length&&(d.delete(e),c.unobserve(e)),0===d.size&&(c.disconnect(),i.delete(o))}}(f,(e,t)=>{b({inView:e,entry:t}),y.current&&y.current(e,t),t.isIntersecting&&d&&r&&(r(),r=void 0)},{root:c,rootMargin:o,threshold:e,trackVisibility:s,delay:t},g),()=>{r&&r()}},[Array.isArray(e)?e.toString():e,f,c,o,d,h,s,g,t]);let w=null==(m=v.entry)?void 0:m.target,j=r.useRef(void 0);f||!w||d||h||j.current===w||(j.current=w,b({inView:!!u,entry:void 0}));let N=[p,v.inView,v.entry];return N.ref=N[0],N.inView=N[1],N.entry=N[2],N}({threshold:0,rootMargin:"100px"}),N=(0,r.useCallback)(()=>{let t=c.length;if(t<e.length){let r=e.slice(t,t+3);return g(e=>[...e,...r]),!0}return!1},[c.length,e]),k=async()=>{if(!x&&!(e.length>0)){m(!0),v(null);try{let e=await (0,u.getNews)(1);if(0===e.length)p(!1);else{let t=[...e].sort((e,t)=>{let r=new Date(e.created_at||0).getTime();return new Date(t.created_at||0).getTime()-r});s(t),g(t.slice(0,3)),p(!1)}}catch(e){console.error("API Error:",e),v(e.response?.status===429?"عذراً، يوجد ضغط عالي...":"حدث خطأ أثناء تحميل الأخبار...")}finally{m(!1)}}};return((0,r.useEffect)(()=>{k()},[]),(0,r.useEffect)(()=>{j&&!x&&e.length>c.length&&N()},[j,x,N,e.length,c.length]),y&&0===c.length)?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-center text-red-500",children:[(0,t.jsx)(d,{size:48,className:"mb-4 opacity-50"}),(0,t.jsx)("p",{children:y}),(0,t.jsxs)("button",{onClick:()=>k(),className:"mt-4 px-6 py-2 bg-red-50 text-red-600 rounded-full font-medium hover:bg-red-100 transition-colors flex items-center gap-2",children:[(0,t.jsx)(h,{size:16}),"إعادة المحاولة"]})]}):(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:c.map((e,r)=>(0,t.jsx)(w,{news:e},`${e.id}-${r}`))}),x&&(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(o.Loader2,{className:"animate-spin text-primary-500",size:32})}),y&&c.length>0&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-red-500",children:[(0,t.jsx)("p",{className:"mb-2",children:y}),(0,t.jsx)("button",{onClick:()=>k(),className:"px-4 py-2 bg-red-50 text-red-600 rounded-full text-sm font-medium hover:bg-red-100 transition-colors",children:"إعادة المحاولة"})]}),!f&&c.length===e.length&&e.length>0&&(0,t.jsx)("div",{className:"text-center py-12 text-gray-400",children:(0,t.jsx)("p",{children:"تم تحميل جميع الأخبار"})}),c.length<e.length&&!y&&(0,t.jsx)("div",{ref:b,className:"h-10 w-full"})]})}],22927)}]);